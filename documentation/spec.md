# **Dan@Dawn: Human-in-the-Loop LLM-Powered Compliance Tool for the Dawn Methodology**

## **Overview**

**Dan@Dawn** is a Python-based tool designed to generate compliance reports for microservice applications, helping developers assess their projects against the principles of the **Dawn Methodology**. This tool is **human-in-the-loop**, meaning AI provides insights, but developers maintain full control over the final decisions. The primary goal is to assist in code reviews by offering actionable feedback regarding **debugging**, **reliability**, **security**, and **minimalism**, ensuring that the code adheres to best practices for quality software development.

This spec details the **architecture**, **primary functions**, and **file structure** of the tool, written with compliance to the **Dawn Methodology**, emphasizing **simplicity**, **maintainability**, and **security**.

---

## **Primary Functions**

### **1. Directory and File Scanning**

- **Function**: The tool starts by scanning the given project directory to gather all necessary files.
- **Input**: A path to the local repository.
- **Behavior**:
  - The tool searches for key files, including:
    - **README files** (`.md`, `.txt`, `.rst`)
    - **Documentation files** (`.pdf`, `.png`, `.svg`, `.md`)
    - **Code files** (`.py`, `.js`, `.java`, etc.)
    - **Dependency files** (`package.json`, `requirements.txt`, `pom.xml`)
  - All relevant files are parsed for content related to debugging, reliability, security, and minimalism.

### **2. Code Analysis Using LLM**

- **Function**: The core function of the tool is to analyze the gathered content using an **LLM** (e.g., OpenAI's GPT-4) to provide insights into how well the codebase aligns with the **Dawn Methodology**.
- **Input**: Parsed text from the scanned files.
- **Behavior**:
  - **Debugging**: The tool checks for error logging, exception handling, and recovery practices.
  - **Reliability**: It analyzes test coverage, error recovery, and resilience.
  - **Security**: The tool evaluates secure coding practices, including input validation, encryption, and the use of secure dependencies.
  - **Minimalism**: It examines code complexity, unnecessary dependencies, and redundancies.
- **Output**: The LLM provides feedback on areas for improvement based on the Dawn Methodology's principles.

### **3. Human-in-the-Loop Feedback**

- **Function**: The feedback generated by the LLM is passed to the developer for final review and action.
- **Input**: Insights generated by the LLM.
- **Behavior**:
  - **Developer Review**: The developer evaluates the LLM's suggestions and determines which changes to implement.
  - **Actionable Insights**: The tool generates a report that includes both **strengths** and **areas for improvement**, but it is ultimately the developer’s responsibility to apply any changes.
  - **Iterative Process**: Feedback is meant to be reviewed and acted upon iteratively, allowing for continuous improvement and refinement.

### **4. Report Generation**

- **Function**: After processing the codebase and generating feedback, the tool produces a **compliance report**.
- **Input**: Feedback provided by the LLM.
- **Behavior**:
  - The report is generated in **Markdown** format, summarizing the analysis for each key area:
    - **Debugging**: Assessing error logging and exception handling.
    - **Reliability**: Reviewing testing practices and recovery mechanisms.
    - **Security**: Evaluating secure coding practices and dependency vulnerabilities.
    - **Minimalism**: Analyzing code complexity and unused dependencies.
  - **Output**: The compliance report is saved to the project directory (or a specified output path) and includes clear, actionable recommendations.

---

## **File Structure**

The tool follows a simple, organized file structure to facilitate maintainability and clarity. The project follows a **modular** design, ensuring that each function is self-contained and easy to test.

### **1. Root Directory**

The root directory contains configuration files and the main entry point for the tool.

- **`dan_at_dawn.py`**: The main script that runs the tool. It handles user input (the repo directory path), invokes the analysis process, and generates the compliance report.
- **`requirements.txt`**: Lists the Python dependencies required to run the tool (e.g., OpenAI API client, file parsing libraries, etc.).
- **`README.md`**: This documentation file, outlining how to use the tool and its intended purpose.

### **2. `src/` Directory**

The `src/` directory contains the core logic of the tool, divided into modules for each key functionality.

- **`scanner.py`**: Handles scanning the project directory for relevant files (e.g., README, code files, dependencies).
- **`parser.py`**: Contains logic for parsing and extracting content from the scanned files.
- **`llm_integration.py`**: Integrates with the LLM (e.g., OpenAI API) to process the parsed content and generate feedback based on the Dawn Methodology.
- **`report.py`**: Handles the generation of the compliance report, formatting the insights into a Markdown document.

### **3. `tests/` Directory**

The `tests/` directory contains unit tests for the various modules in `src/`, ensuring that each function performs as expected.

- **`test_scanner.py`**: Unit tests for the `scanner.py` module.
- **`test_parser.py`**: Unit tests for the `parser.py` module.
- **`test_llm_integration.py`**: Unit tests for the LLM interaction and feedback generation.
- **`test_report.py`**: Unit tests for the report generation process.

### **4. `config/` Directory**

The `config/` directory contains configuration files that manage settings for the tool, such as API keys and output paths.

- **`config.json`**: Configuration file for API keys, output paths, and other customizable settings (e.g., verbosity of the feedback).
- **`llm_config.json`**: Configuration specific to the LLM (e.g., model choice, temperature settings, etc.).

---

## **Code Quality and Adherence to the Dawn Methodology**

### **1. Simplicity**

- The code follows a **modular** structure, breaking down the functionality into distinct, manageable components.
- The logic is designed to be as **simple** as possible while still being flexible enough to handle the different types of projects the tool might analyze.
- There are no **overly complex dependencies** or features that add unnecessary complexity to the tool.

### **2. Reliability**

- The tool is designed to be **robust**, with error handling mechanisms for cases where files cannot be read or the LLM fails to provide meaningful feedback.
- Unit tests are used to verify the accuracy and stability of each module.

### **3. Security**

- All sensitive information, like **API keys**, is stored in a **configuration file** or retrieved from **environment variables**.
- The tool does not process or expose any sensitive data beyond what is necessary for the analysis.

### **4. Minimalism**

- The tool focuses on the core functionality required to assess a microservice project’s compliance with the **Dawn Methodology**.
- **Unnecessary features or dependencies** are avoided to ensure the tool remains **lightweight** and **easy to maintain**.

---

## **Example Usage**
